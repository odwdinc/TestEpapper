<!DOCTYPE html>
<html>
<body>

<h1>The BLE Event</h1>


<button onclick="myFunction()">Click me</button>

<p id="demo"></p>

<script>
function myFunction() {
  	log('Requesting Bluetooth Device...');
	navigator.bluetooth.requestDevice({
  		filters: [{
    		services: ['19b10000-e8f2-537e-4f6c-d104768a1214']
  		}]
	})
	.then(device => {
    log('Connecting to GATT Server...');
    return device.gatt.connect();
	})
	.then(server => {
		log('Getting Service...');
		return server.getPrimaryService(serviceUuid);
	})
	.then(service => {
	log('Getting Characteristics...');
		if (characteristicUuid) {
		  // Get all characteristics that match this UUID.
		  return service.getCharacteristics(characteristicUuid);
		}
		// Get all characteristics.
		return service.getCharacteristics();
	})
	.then(characteristics => {
		log('> Characteristics: ' +
	  		characteristics.map(c => c.uuid).join('\n' + ' '.repeat(19)));
	})
	.catch(error => {
		log('Argh! ' + error);
	});
}
</script>

</body>
</html>
